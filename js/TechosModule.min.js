var TechosModule=(function(){var h=116,d=0,g,c="<h2>{{pico}} ({{altura}}m)</h2><p><b>Techo de:</b> {{concejo}}</p><p><b>Dificultad:</b> {{dificultadTextual dificultad }}</p><p><b>Coordenadas:</b> {{latitud}}, {{longitud}}</p>",b=null,e=null,f=null;var a=function(p){var l=null,o="img/pinMapa.png";var n=new google.maps.InfoWindow();for(var m=0,j=g.techos.length;m<j;m++){l=new google.maps.LatLng(g.techos[m].latitud,g.techos[m].longitud);var k=new google.maps.Marker({position:l,map:p,icon:o,title:g.techos[m].pico+" ("+g.techos[m].altura+"m)"});google.maps.event.addListener(k,"click",(function(q,r){return function(){n.setContent(b(g.techos[r]));n.open(p,q)}})(k,m))}};return{clickFila:function(j){j.preventDefault();var m=$(this).parent().find("input:checked").length===1;if(!m){$(this).parent().find("input").prop("checked",true);d+=parseInt($(this).closest("tr").data("dificultad"))}else{$(this).parent().find("input").prop("checked",false);d-=parseInt($(this).closest("tr").data("dificultad"))}$(this).parent().find(".ascendido").toggleClass("no");var l=$(this).closest("table").find("input:checked").length,i=l*100/78+"%",k=Math.round(d*100/h)+"%";e.css("width",i).find(".sr-only").html(l+"/78");f.css("width",k).find(".sr-only").html(k)},asignaDificultades:function(){var l=$("tbody tr");for(var j=0,k=l.length;j<k;j++){l.eq(j).data("dificultad",g.techos[j].dificultad)}},init:function(i){g=i;b=Handlebars.compile(c);e=$("#resultado").find(".progress-bar");f=$("#resultadoPonderado").find(".progress-bar");Handlebars.registerHelper("dificultadTextual",function(j){switch(j){case 1:return"Fácil";case 2:return"Media";case 3:return"Difícil";default:return"-"}});Handlebars.registerHelper("alturaPorcentaje",function(j){return(j*0.137839)});Handlebars.registerHelper("distanciaIzquierda",function(j){return(j*160)})},initializeMap:function(){var i={scrollwheel:false,zoom:9,center:new google.maps.LatLng(43.319183,-5.844727),mapTypeId:google.maps.MapTypeId.TERRAIN};var j=new google.maps.Map(document.getElementById("map-canvas"),i);a(j)},loadMapScript:function(){var i=document.createElement("script");i.type="text/javascript";i.src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false&callback=TechosModule.initializeMap";document.body.appendChild(i)},startHeaderAnimation:function(){$("body").removeClass("unanimated")}}})();